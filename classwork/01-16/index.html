<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Loading Data</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
    </head>
    <body>
        <h1 id="label"></h1>
        <p>
            There are currently <span id="users"></span> users on Data USA.
        </p>
        <script>
        
            
            /*function convert2numbers(d,i) {
                d.value = +d.value;
            }

            function drawlabel() {
                d3.select("#label").html(data[0].value);
            }

            function analyzeData(error, data) {
  
                data.forEach(convert2numbers);
                
                console.log("error:", error);
                console.log("data:", data);

                d3.select("#label").html(data[0].value);

            }

            //d3.csv("data.csv", analyzeData);
            d3.json("data.json", analyzeData);*/

            var realTimeURL = "https://whiteboard.datawheel.us/api/google-analytics/realtime/111999474";
            var frequency = 10 * 1000; //10 seconds

        function fetchData() {
            d3.json(realTimeURL, function(error,users) {
                console.log("users:", users);
                d3.select("#users").html(users);
            });
        }

        fetchData();
        setInterval(fetchData, frequency);


        </script>
    </body>
</html>